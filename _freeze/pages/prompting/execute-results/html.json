{
  "hash": "343d85bc04859bfd90aff592959c22c4",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Prompting Programmatically\ndescription: |\n  Programming a GPT model.\ndate: last-modified\ndate-format: 'DD MMM, YYYY'\nauthor:\n  - name: Andrew Ellis\n    url: 'https://github.com/awellis'\n    affiliation: 'Virtuelle Akademie, Berner Fachhochschule'\n    affiliation-url: 'https://virtuelleakademie.ch'\n    orcid: 0000-0002-2788-936X\nlicense: CC BY\ncitation: true\nbibliography: ../bibliography.bib\nformat:\n  html:\n    toc: true\n    code-fold: false\n    code-link: true\nexecute:\n  cache: false\n  keep-ipynb: true\ncode-annotations: select\n---\n\n::: {#ee072378 .cell execution_count=1}\n``` {.python .cell-code}\nimport openai\nfrom openai import OpenAI\nclient = OpenAI()\nimport os\n\nfrom dotenv import load_dotenv, find_dotenv\n_ = load_dotenv(find_dotenv())\n\nopenai.api_key  = os.getenv('OPENAI_API_KEY')\n\nfrom IPython.display import display, Markdown, Latex, HTML, JSON\n```\n:::\n\n\n::: {#da23b819 .cell execution_count=2}\n``` {.python .cell-code}\ndef get_completion(prompt, model=\"gpt-4-turbo-preview\", temperature=0.0):\n    messages = [{\"role\": \"user\", \"content\": prompt}]\n    response = client.chat.completions.create(\n        model=model,\n        messages=messages,\n        temperature=temperature\n    )\n    return response.choices[0].message.content\n```\n:::\n\n\n## Prompting Principles\n- **Principle 1: Write clear and specific instructions**\n- **Principle 2: Give the model time to “think”**\n\n### Tactics\n\n#### Tactic 1: Use delimiters to clearly indicate distinct parts of the input\n- Delimiters can be anything, such as: ```, \"\"\", < >, `<tag> </tag>`, `:`\n\n::: {#3c8f7e2c .cell execution_count=3}\n```` {.python .cell-code}\ntext = f\"\"\"\nYou should express what you want a model to do by \\ \nproviding instructions that are as clear and \\ \nspecific as you can possibly make them. \\ \nThis will guide the model towards the desired output, \\ \nand reduce the chances of receiving irrelevant \\ \nor incorrect responses. Don't confuse writing a \\ \nclear prompt with writing a short prompt. \\ \nIn many cases, longer prompts provide more clarity \\ \nand context for the model, which can lead to \\ \nmore detailed and relevant outputs.\n\"\"\"\nprompt = f\"\"\"\nSummarize the text delimited by triple backticks \\ \ninto a single sentence.\n```{text}```\n\"\"\"\nresponse = get_completion(prompt)\nprint(response)\n````\n\n::: {.cell-output .cell-output-stdout}\n```\nTo achieve the desired output from a model, provide clear and specific instructions, noting that longer prompts often offer more clarity and context, thus reducing the likelihood of irrelevant or incorrect responses.\n```\n:::\n:::\n\n\n#### Tactic 4: \"Few-shot\" prompting\n\n::: {#813922d8 .cell execution_count=4}\n``` {.python .cell-code}\nprompt = f\"\"\"\nYour task is to answer in a consistent style.\n\n<child>: Teach me about patience.\n\n<grandparent>: The river that carves the deepest \\ \nvalley flows from a modest spring; the \\ \ngrandest symphony originates from a single note; \\ \nthe most intricate tapestry begins with a solitary thread.\n\n<child>: Teach me about resilience.\n\"\"\"\nresponse = get_completion(prompt)\nprint(response)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<grandparent>: The mightiest oak in the forest was once a tiny acorn that stood its ground; the highest mountain withstands the harshest weather, yet remains steadfast; the most enduring bridges were built one stone at a time.\n```\n:::\n:::\n\n\n## Sentment Analysis\n\n::: {#77bf1eb5 .cell execution_count=5}\n``` {.python .cell-code}\nlamp_review = \"\"\"\nNeeded a nice lamp for my bedroom, and this one had \\\nadditional storage and not too high of a price point. \\\nGot it fast.  The string to our lamp broke during the \\\ntransit and the company happily sent over a new one. \\\nCame within a few days as well. It was easy to put \\\ntogether.  I had a missing part, so I contacted their \\\nsupport and they very quickly got me the missing piece! \\\nLumina seems to me to be a great company that cares \\\nabout their customers and products!!\n\"\"\"\n```\n:::\n\n\n::: {#82b9a582 .cell execution_count=6}\n``` {.python .cell-code}\nprompt = f\"\"\"\nWhat is the sentiment of the following product review, \nwhich is delimited with triple backticks?\n\nReview text: '''{lamp_review}'''\n\"\"\"\nresponse = get_completion(prompt)\nprint(response)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThe sentiment of the provided product review is positive. The reviewer expresses satisfaction with the lamp's features, price, and the company's customer service, including fast shipping and prompt resolution of issues.\n```\n:::\n:::\n\n\n## Tone transformation\n\n::: {#6d558ef7 .cell execution_count=7}\n``` {.python .cell-code}\nprompt = f\"\"\"\nTranslate the following from slang to a business letter: \n'Dude, This is Joe, check out this spec on this standing lamp.'\n\"\"\"\nresponse = get_completion(prompt)\nprint(response)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDear [Recipient's Name],\n\nI hope this message finds you well. My name is Joe, and I am writing to bring to your attention the specifications of a particular standing lamp that I believe may be of interest to you. Please find attached the detailed specifications for your review.\n\nShould you have any questions or require further information, please do not hesitate to contact me.\n\nBest regards,\n\nJoe [Your Last Name]\n[Your Contact Information]\n```\n:::\n:::\n\n\n## Proofreading and editing\n\n::: {#7bd66fa2 .cell execution_count=8}\n``` {.python .cell-code}\ntext = f\"\"\"\nGot this for my daughter for her birthday cuz she keeps taking \\\nmine from my room.  Yes, adults also like pandas too.  She takes \\\nit everywhere with her, and it's super soft and cute.  One of the \\\nears is a bit lower than the other, and I don't think that was \\\ndesigned to be asymmetrical. It's a bit small for what I paid for it \\\nthough. I think there might be other options that are bigger for \\\nthe same price.  It arrived a day earlier than expected, so I got \\\nto play with it myself before I gave it to my daughter.\n\"\"\"\nprompt = f\"proofread and correct this review: ```{text}```\"\nresponse = get_completion(prompt)\nprint(response)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nI purchased this for my daughter for her birthday because she constantly borrows mine from my room. Indeed, adults enjoy pandas as well. She carries it with her everywhere, and it's incredibly soft and adorable. However, one of the ears is slightly lower than the other, and I don't believe it was intended to be asymmetrical. It's somewhat small for the price I paid. I think there might be larger options available for the same price. It arrived a day earlier than anticipated, allowing me to play with it myself before giving it to my daughter.\n```\n:::\n:::\n\n\n::: {#e90c73ba .cell execution_count=9}\n``` {.python .cell-code}\nfrom redlines import Redlines\n\ndiff = Redlines(text,response)\ndisplay(Markdown(diff.output_markdown))\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n<span style='color:red;font-weight:700;text-decoration:line-through;'>Got </span><span style='color:green;font-weight:700;'>I purchased </span>this for my daughter for her birthday <span style='color:red;font-weight:700;text-decoration:line-through;'>cuz </span><span style='color:green;font-weight:700;'>because </span>she <span style='color:red;font-weight:700;text-decoration:line-through;'>keeps taking </span><span style='color:green;font-weight:700;'>constantly borrows </span>mine from my <span style='color:red;font-weight:700;text-decoration:line-through;'>room.  Yes, </span><span style='color:green;font-weight:700;'>room. Indeed, </span>adults <span style='color:red;font-weight:700;text-decoration:line-through;'>also like </span><span style='color:green;font-weight:700;'>enjoy </span>pandas <span style='color:red;font-weight:700;text-decoration:line-through;'>too.  </span><span style='color:green;font-weight:700;'>as well. </span>She <span style='color:red;font-weight:700;text-decoration:line-through;'>takes </span><span style='color:green;font-weight:700;'>carries </span>it <span style='color:red;font-weight:700;text-decoration:line-through;'>everywhere </span>with <span style='color:red;font-weight:700;text-decoration:line-through;'>her, </span><span style='color:green;font-weight:700;'>her everywhere, </span>and it's <span style='color:red;font-weight:700;text-decoration:line-through;'>super </span><span style='color:green;font-weight:700;'>incredibly </span>soft and <span style='color:red;font-weight:700;text-decoration:line-through;'>cute.  One </span><span style='color:green;font-weight:700;'>adorable. However, one </span>of the ears is <span style='color:red;font-weight:700;text-decoration:line-through;'>a bit </span><span style='color:green;font-weight:700;'>slightly </span>lower than the other, and I don't <span style='color:red;font-weight:700;text-decoration:line-through;'>think that </span><span style='color:green;font-weight:700;'>believe it </span>was <span style='color:red;font-weight:700;text-decoration:line-through;'>designed </span><span style='color:green;font-weight:700;'>intended </span>to be asymmetrical. It's <span style='color:red;font-weight:700;text-decoration:line-through;'>a bit </span><span style='color:green;font-weight:700;'>somewhat </span>small for <span style='color:red;font-weight:700;text-decoration:line-through;'>what </span><span style='color:green;font-weight:700;'>the price </span>I <span style='color:red;font-weight:700;text-decoration:line-through;'>paid for it though. </span><span style='color:green;font-weight:700;'>paid. </span>I think there might be <span style='color:red;font-weight:700;text-decoration:line-through;'>other </span><span style='color:green;font-weight:700;'>larger </span>options <span style='color:red;font-weight:700;text-decoration:line-through;'>that are bigger </span><span style='color:green;font-weight:700;'>available </span>for the same <span style='color:red;font-weight:700;text-decoration:line-through;'>price.  </span><span style='color:green;font-weight:700;'>price. </span>It arrived a day earlier than <span style='color:red;font-weight:700;text-decoration:line-through;'>expected, so I got </span><span style='color:green;font-weight:700;'>anticipated, allowing me </span>to play with it myself before <span style='color:red;font-weight:700;text-decoration:line-through;'>I gave </span><span style='color:green;font-weight:700;'>giving </span>it to my daughter.\n:::\n:::\n\n\n::: {#871e820d .cell execution_count=10}\n``` {.python .cell-code}\nprompt = f\"\"\"\nproofread and correct this review. Make it more compelling. \nEnsure it follows APA style guide and targets an advanced reader. \nOutput in markdown format.\nText: ```{text}```\n\"\"\"\nresponse = get_completion(prompt)\ndisplay(Markdown(response))\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n```markdown\nI recently purchased a panda-themed item for my daughter's birthday, motivated by her frequent appropriations of my own cherished version. It is worth noting that the appeal of pandas transcends age boundaries, captivating both adults and children alike with their endearing qualities. This particular item has become a constant companion for my daughter, accompanying her in various daily activities. Its plush texture and adorable appearance contribute significantly to its charm.\n\nHowever, it is pertinent to mention a slight imperfection in the product's design. The asymmetry of the ears, with one positioned lower than the other, appears to be an unintended flaw rather than a deliberate stylistic choice. Additionally, the size of the item did not entirely meet my expectations, especially considering the price point. Prospective buyers might find alternatives in the market that offer better value in terms of size for the same financial outlay.\n\nOn a positive note, the delivery of the item exceeded expectations, arriving a day prior to the anticipated date. This serendipitous occurrence afforded me the opportunity to personally engage with the item, further solidifying my appreciation for its qualities before presenting it to my daughter.\n\nIn conclusion, while the product possesses undeniable appeal and has won the affection of my daughter, potential improvements in design accuracy and size valuation could enhance its overall value proposition. Future purchasers are advised to weigh these considerations carefully against their personal preferences and requirements.\n```\n:::\n:::\n\n\n",
    "supporting": [
      "prompting_files"
    ],
    "filters": [],
    "includes": {}
  }
}